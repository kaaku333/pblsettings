<!DOCTYPE html><html>  <head>    <title>MOYORIEKI Configuration</title>  </head>  <body>    <h2>MOYORIEKI configration</h2>    <h3>Language:      <select id="language_select">      <option value="japanese">japanese</option>      <option value="english">english</option>     </select>    </h3>    <h3>Direction:      <select id="direction_select">      <option value="tost">to Station</option>      <option value="fromst">from Station</option>     </select>    </h3>    <h3>web service:      <select id="useservice_select">      <option value="simpleapi">Simple API</option>      <option value="heartrails">HeartRails Geo API</option>     </select>    </h3>    Note: HeartRails Geo API is only in Japanese .    <h3>Geo info push to:      <select id="pushing_select">      <option value="none">none</option>      <option value="notification">notification</option>      <option value="timeline">timeline</option>     </select>    </h3>    <h3>Geo info history (CSV)     <br>     <a id="sendmail" href="mailto:your_mail@example.com?subject=MOYORIEKI GEO HISTORY&amp;body=">click to mail Geo history</a>     <div>      <textarea id="history" cols=30 rows=15 style="overflow:auto;">      </textarea>     </div>        Clear history <input type="checkbox" id="clearhistory" value="clear">    </h3>    <h3>Geo info history format:      <select id="histform_select">      <option value="memo">memo</option>      <option value="mymapcsv">google mymap csv</option>     </select>    </h3>    <h2>      <button id="save_button">SAVE</button>    </h2>	  	<style>  	select{      -webkit-appearance: button;      -moz-appearance: button;      appearance: button;      border-radius:6px;  	   padding: 10px;  	   line-height: 20px;      font-size: 20px;      color: #FFFFFF;      border: none;      background:#888888;  	}  	button {  		font-size: 20px;  	}  	</style>      <script>      function saveOptions() {        var optionObj = {};        var element;        // checkbox        element = document.getElementById("clearhistory");        if(element.checked){            optionObj.clearhistory = "on";        }        // select         element = document.getElementById("language_select");        optionObj.language = element.options[element.selectedIndex].value;        // select         element = document.getElementById("pushing_select");        optionObj.pushing = element.options[element.selectedIndex].value;        // select         element = document.getElementById("histform_select");        optionObj.histform = element.options[element.selectedIndex].value;        // select         element = document.getElementById("useservice_select");        optionObj.useservice = element.options[element.selectedIndex].value;        // select         element = document.getElementById("direction_select");        optionObj.direction = element.options[element.selectedIndex].value;        return optionObj;      };      var submitButton = document.getElementById("save_button");      submitButton.addEventListener("click",         function() {          console.log("Submit");          var options = saveOptions();          var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));                    document.location = location;        }, 		  false);			   var optionString = decodeURIComponent(location.href.split("?")[1]);     var options = optionString.split(",");	   //document.write(options+"<p>num="+options.length+"<p>");		for (var idx = 0; idx < options.length; idx++){      if(options[idx] == "debug"){          // hide tags for debug          var debug_tag = document.getElementsByTagName("dl");          debug_tag.item(0).style.display = "block";      }else if(options[idx].match(/^history=/)){        // set textarea data        var optValue = options[idx].split("=");        var textItem = optValue[0];        var textValue = optValue[1];        var element = document.getElementById("history");        textValue = textValue.replace(/;/g,",");        textValue = textValue.replace(/@/g,"&#13;");        element.innerHTML = textValue;        // set mail data        textValue = textValue.replace(/&#13;/g,"%0a");        textValue = textValue.replace(/ /g,"%20");        element = document.getElementById("sendmail");        element.href = 'mailto:your_mail@example.com?subject=MOYORIEKI Geo history&body=' + textValue;      }else{        var optValue = options[idx].split("=");        var selectItem = optValue[0]+"_select";        var selectedValue = optValue[1];        var element = document.getElementById(selectItem);        if(element != null){          //document.write(selectItem+" = "+selectedValue+"<p>");          for (var i = 0; i < element.options.length; i++) {             //document.write(i+":"+element.options[i].value+"<p>");            if ( element.options[i].value == selectedValue ){              element.selectedIndex = i;              break;            }           }        }              }		}	  	  </script>	  copyright kaaku ^_^  </body></html>