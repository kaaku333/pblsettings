<!DOCTYPE html><html>  <head>    <title>Multi Time Viewer Configuration</title>    <meta charset="UTF-8">    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0" name="viewport">    <title></title>        <link rel="stylesheet" href="../dist/css/slate.min.css">        <!--    <link rel="stylesheet" href="./config_files/slate.css">    <link rel="stylesheet" href="./config_files/custom.css">  -->  <style>  .title {    padding: 15px 10px;    text-transform: uppercase;    font-family: 'PT Sans', sans-serif;    font-size: 1.2em;    font-weight: 500;    color: #888888;    text-align: center;  }  </style>  </head>  <body>  <form id="main-form">    <h1 class='title'>Multi Time Viewer</h1>    <div class='item-container'>      <div class='item-container-footer'>        <div class='item'>          Input setting and click SAVE button to submit        </div>      </div>    </div>    <div class="item-container">      <div class="item-container-header">LOAD TIMELIST</div>      <div class="item-container-content">      <label class="item">        TimeList URL        <div class="item-input-wrapper">          <input type="text" class="item-input" id="urltofetch" placeholder="e.g. https://www.dropbox.com/s/fdf7x59v298mnht/MTVurllistSample.txt?dl=0">        </div>      </label>      <div class="item-container-content">      <label class="item">        History           <select id="list_url_select" dir="rtl" class="item-select">            <option dir="ltr" value="0" selected>none</option>          </select>        </label>      </div>           <div class='item-container-footer'>        Please input TimeList URL or select History        <br>        * What is TimeList        <a href="#" id="detail_button" class="arrow triangle-down"></a>        <div id="detail" style="display: none;">          <ul style="padding-left: 3ex;">          <li> Plain Text file          <li> Stored on Web strage service like as Dropbox          <li> Need to be able to download without password (use Published URL)          <li> use file exension of .txt          <li> you can use NextTrain (japanese) format with .tbl extension          <li> you can use iCalendar (such as export from Outlook) format with .ics extension          </ul>        </div>        <br>        * TimeList Sample        <a href="#" id="detail_button2" class="arrow triangle-down"></a>        <div id="detail2" style="display: none;">          <ul style="padding-left: 3ex;">          <li>SAMPLE1: Daily Events            <a href="#" onclick="pasteURL('https://www.dropbox.com/s/b79psvjl7kwhbc0/MTVdailySample.txt?dl=0')" class="textbtn">Put URL</a>            <a href="https://dl.dropboxusercontent.com/s/b79psvjl7kwhbc0/MTVdailySample.txt" class="textbtn">Show File</a>          <li>SAMPLE2: Monthly Events            <a href="#" onclick="pasteURL('https://www.dropbox.com/s/o1t0odik8jmhx0d/MTVmonthSample.txt?dl=0')" class="textbtn">Put URL</a>            <a href="https://dl.dropboxusercontent.com/s/o1t0odik8jmhx0d/MTVmonthSample.txt" class="textbtn">Show File</a>          <li>SAMPLE3: Yearly Events            <a href="#" onclick="pasteURL('https://www.dropbox.com/s/uxsq396dx7xzyg1/MTVyearSample.txt?dl=0')" class="textbtn">Put URL</a>            <a href="https://dl.dropboxusercontent.com/s/uxsq396dx7xzyg1/MTVyearSample.txt" class="textbtn">Show File</a>          <li>SAMPLE4: World Time            <a href="#" onclick="pasteURL('https://www.dropbox.com/s/9y2hufx4lbv1qie/MTVworldSample.txt?dl=0')" class="textbtn">Put URL</a>            <a href="https://dl.dropboxusercontent.com/s/9y2hufx4lbv1qie/MTVworldSample.txt" class="textbtn">Show File</a>          <li>SAMPLE5: URL List            <a href="#" onclick="pasteURL('https://www.dropbox.com/s/fdf7x59v298mnht/MTVurllistSample.txt?dl=0')" class="textbtn">Put URL</a>            <a href="https://dl.dropboxusercontent.com/s/fdf7x59v298mnht/MTVurllistSample.txt" class="textbtn">Show File</a>          <li>SAMPLE6: NextTran (Japanese format)            <a href="#" onclick="pasteURL('https://www.dropbox.com/s/xpjeoy8rploaqd4/nexttrain_shimokita.tbl?dl=0')" class="textbtn">Put URL</a>            <a href="https://dl.dropboxusercontent.com/s/xpjeoy8rploaqd4/nexttrain_shimokita.tbl" class="textbtn">Show File</a>          <li>SAMPLE7: iCalendar (export from Outlook))            <a href="#" onclick="pasteURL('https://www.dropbox.com/s/2hg1ot99kwzx3u3/sample.ics?dl=0')" class="textbtn">Put URL</a>            <a href="https://dl.dropboxusercontent.com/s/v72gygrof8hhlsl/sample.txt" class="textbtn">Show File</a>          <li>SAMPLE8: Imports other TimeList            <a href="#" onclick="pasteURL('https://www.dropbox.com/s/zw67hlmueismlj5/MTVdailySample2.txt?dl=0')" class="textbtn">Put URL</a>            <a href="https://dl.dropboxusercontent.com/s/zw67hlmueismlj5/MTVdailySample2.txt" class="textbtn">Show File</a>          </ul>        </div>        <br>        * How to add TimeList (e.g. with Dropbox)        <a href="#" id="detail_button3" class="arrow triangle-down"></a>        <div id="detail3" style="display: none;">          <ol style="padding-left: 3ex;">          <li> Edit TimeList plain text file on your PC or Smartphone          <br> At first, you can copy and paste sample TimeList above          <li> Upload TimeList on your Dropbox Public folder          <li> Copy public URL of the text file like as https://www.dropbox.com/s/fdf7x59v298mnht/MTVurllistSample.txt?dl=0          <li> Open This Setting and paste URL above input area          <li> push SAVE button          </ol>        </div>      </div>    </div>    <div class="item-container">      <div class="item-container-header">DELETE TIMELIST</div>      <div class="item-container-content">        <label class="item">          Delete Selected History          <input type="checkbox" class="item-checkbox" id="deleteSelectedHistory">        </label>      </div>      <div class="item-container-content">        <label class="item">          Delete All History          <input type="checkbox" class="item-checkbox" id="deleteAllHistory">        </label>      </div>      <div class="item-container-content">        <label class="item">          Delete Local added items in Pebble          <input type="checkbox" class="item-checkbox" id="deleteAlarminPebble">        </label>      </div>      <div class="item-container-content">        <label class="item">          Delete All in Pebble          <input type="checkbox" class="item-checkbox" id="deleteAllinPebble">        </label>      </div>    </div>    <div class="item-container">      <div class="item-container-header">Sort MENU Items</div>      <div class="item-container-content">        <label class="item">          Menu Items <a href="#" id="menuitems_button" class="arrow triangle-down"></a>          <div class="item-draggable-list" id="menuitems" style="display: none;">            <label class="item" id="w">Item Information</label>            <label class="item" id="a">Goto Next Item</label>            <label class="item" id="b">Goto Top Item</label>            <label class="item" id="c">Push Timeline</label>            <label class="item" id="d">Toggle Alarm</label>            <label class="item" id="e">Alarm Mode</label>            <label class="item" id="f">Days Format</label>            <label class="item" id="g">Periodic Time</label>            <label class="item" id="h">Sort Items</label>            <label class="item" id="i">Display Second</label>                      <label class="item" id="u">--- More Menu ---</label>            <label class="item" id="j">Goto Last Item</label>            <label class="item" id="k">Add Alarm item</label>            <label class="item" id="l">Add Now Alarm</label>            <label class="item" id="m">Delete Item</label>            <label class="item" id="n">Wakeup by Alarm</label>            <label class="item" id="o">Highlight Font</label>            <label class="item" id="p">Color Theme</label>            <label class="item" id="q">Assign Long Push</label>            <label class="item" id="r">Date Format</label>            <label class="item" id="s">Time Type</label>            <label class="item" id="t">DisConnect Vibe</label>            <label class="item" id="x">Reload items</label>            <label class="item" id="y">Three Line item</label>        </div>      </label>      <div class="item-container-content">        <label class="item">          Reset Item Sorting          <a href="#" onclick="resetsortitems()" class="textbtn">Reset</a>        </label>      </div>    </div>    <div class='item-container'>      <div class='button-container'>        <input id='save_button' type='button' class='item-button' value='SAVE'>      </div>    </div>	     <div class='item-container-footer'>      copyright kaaku ^_^    </div>    <dl id="debug" style="display: none;">      <input type="text" id="debdate" size="40" value="" >    </dl>  </form>	  	<style>.textbtn {  background: #EEE;  color: #888;  border: 1px solid #FFF;  -moz-box-shadow: 1px 1px 1px rgba(000,000,000,0.3);  -webkit-box-shadow: 1px 1px 1px rgba(000,000,000,0.3);  padding: 0px 5px;}.arrow{position: relative;display: inline-block;padding: 0 0 0 16px;color: #000;vertical-align: middle;text-decoration: none;font-size: 15px;}.arrow::before,.arrow::after{position: absolute;top: 0;bottom: 0;left: 0;margin: auto;content: "";vertical-align: middle;}.triangle-down::before{width: 15px;height: 15px;-webkit-border-radius: 50%;border-radius: 50%;background: #7a0;}.triangle-down::after{left: 4px;width: 4px;height: 4px;border-top: 2px solid #fff;border-right: 2px solid #fff;-webkit-transform: rotate(135deg);transform: rotate(135deg);}.triangle-up::before{width: 15px;height: 15px;-webkit-border-radius: 50%;border-radius: 50%;background: #7a0;}.triangle-up::after{left: 4px;width: 4px;height: 4px;border-top: 2px solid #fff;border-right: 2px solid #fff;-webkit-transform: rotate(-45deg);transform: rotate(-45deg);}.triangle-downx{  width: 0;  height: 0;  background-color: #fff;  border-left: 15px solid transparent;  border-right: 15px solid transparent;  border-top: 10px solid #FF4700;  }   .triangle-upx{  width: 0;  height: 0;  background-color: #fff;  border-left: 10px solid transparent;  border-right: 10px solid transparent;  border-bottom: 10px solid #FF4700;  } </style>    <script>    function setmenuids(idstr) {       var names = {        a: "Goto Next Item",        b: "Goto Top Item",        c: "Push Timeline",        d: "Toggle Alarm",        e: "Alarm Mode",        f: "Days Format",        g: "Periodic Time",        h: "Sort Items",        i: "Display Second",        j: "Goto Last Item",        k: "Add Pre Alarm",        l: "Add New Alarm",        m: "Delete Item",        n: "Wakeup by Alarm",        o: "Highlight Font",        p: "Color Theme",        q: "Assign Long Push",        r: "Date Format",        s: "Time Type",        t: "DisConnect Vibe",        x: "Reload Items",        y: "Three Line Item",        u: "---- More Menu ----",        w: "Item Information",      };      var ids = idstr.split("");      var idx = 0;      var opthtml = '<div class="item-draggable-handle"><div class="item-draggable-handle-bar"></div><div class="item-draggable-handle-bar"></div><div class="item-draggable-handle-bar"></div></div>';      var element = document.getElementById("menuitems");       var child = element.children;      for(var name in ids){        var id = ids[idx];        child[idx].id = id;        child[idx].innerHTML = names[id]+opthtml;        idx++;      }    }     function resetsortitems(){      setmenuids('wabcdefghiujklmnopqrstxy');    }    function getmenuids() {       var element = document.getElementById("menuitems");       var cnt = element.childElementCount;      var child = element.children;      var idstr  = "";      for(var idx = 0; idx < cnt; idx++){        idstr += child[idx].id;      }      return idstr;    }       function saveOptions() {        var urltofetch = document.getElementById("urltofetch").value;        var list_url_select = document.getElementById("list_url_select");        var list_url = list_url_select.options[list_url_select.selectedIndex].value;        var deleteall = document.getElementById("deleteAllinPebble").checked ? "on":"off";        var deletealarm = document.getElementById("deleteAlarminPebble").checked ? "on":"off";        var deleteselectedhist = document.getElementById("deleteSelectedHistory").checked ? "on":"off";        var deleteallhist = document.getElementById("deleteAllHistory").checked ? "on":"off";        var menuids = getmenuids();       var options = {          "urltofetch" : urltofetch,          "list_url"   : list_url,          "deleteall"  : deleteall,          "deletealarm" : deletealarm,          "deleteselectedhist" : deleteselectedhist,          "deleteallhist" : deleteallhist,          "menuids" : menuids,        };        return options;      };      // Get query variables      function getQueryParam(variable, defaultValue) {        // Find all URL parameters        var query = location.search.substring(1);        var vars = query.split('&');        for (var i = 0; i < vars.length; i++) {          var pair = vars[i].split('=');          // If the query variable parameter is found, decode it to use and return it for use          if (pair[0] === variable) {            return decodeURIComponent(pair[1]);          }        }        return defaultValue || false;      }      var submitButton = document.getElementById("save_button");      submitButton.addEventListener("click",         function() {          console.log("Submit");          var options = saveOptions();          var return_to = getQueryParam('return_to', 'pebblejs://close#');          var location = return_to + encodeURIComponent(JSON.stringify(options));                    document.location = location;        },       false);						      var detailButton = document.getElementById("detail_button");      detailButton.addEventListener("click",        function(){              var strs = document.getElementById("detail");              if(strs.style.display == "block"){                strs.style.display = "none";                detailButton.className = "arrow triangle-down"//                detailButton.value = "v";              }else{                strs.style.display = "block";                                 detailButton.className = "arrow triangle-up" //               detailButton.value = "^";              }        },      false);      var detailButton2 = document.getElementById("detail_button2");      detailButton2.addEventListener("click",        function(){              var strs = document.getElementById("detail2");              if(strs.style.display == "block"){                strs.style.display = "none";                detailButton2.className = "arrow triangle-down"//                detailButton.value = "v";              }else{                strs.style.display = "block";                                 detailButton2.className = "arrow triangle-up" //               detailButton.value = "^";              }        },      false);      var detailButton3 = document.getElementById("detail_button3");      detailButton3.addEventListener("click",        function(){              var strs = document.getElementById("detail3");              if(strs.style.display == "block"){                strs.style.display = "none";                detailButton3.className = "arrow triangle-down"//                detailButton.value = "v";              }else{                strs.style.display = "block";                                 detailButton3.className = "arrow triangle-up" //               detailButton.value = "^";              }        },      false);      var menuitembutton = document.getElementById("menuitems_button");      menuitembutton.addEventListener("click",        function(){              var strs = document.getElementById("menuitems");              if(strs.style.display == "block"){                strs.style.display = "none";                menuitembutton.className = "arrow triangle-down"//                detailButton.value = "v";              }else{                strs.style.display = "block";                                 menuitembutton.className = "arrow triangle-up" //               detailButton.value = "^";              }        },      false);      function pasteURL(sampleurl){        document.getElementById("urltofetch").value = sampleurl;      }/*      var sampleButton1 = document.getElementById("sample_button1");      sampleButton1.addEventListener("click",        function(){          pasteSample(sampleButton1.href.value);//          pasteSample("https://www.dropbox.com/s/fdf7x59v298mnht/MTVurllistSample.txt?dl=0");        },      false);*/     if(typeof location.href === "string"){       var optionString = location.href.split("?")[1];       if(typeof optionString === "string"){          optionString = optionString.split("&")[0];          if(typeof optionString === "string"){      	   var options = decodeURI(optionString).split(",");           if(options.length < 1 || options[0] == ""){             // no option string           }else{      	   //document.write(options+"<p>num="+options.length+"<p>");      		for (var idx = 0; idx < options.length; idx++){            if(options[idx] == "debug"){                // hide tags for debug                var debug_tag = document.getElementById("debug");      //          var debug_tag = document.getElementsByTagName("dl");                debug_tag.style.display = "block";            }else if (options[idx].indexOf("list_url") == 0) {              var optValue = options[idx].split("=");              var selectList = optValue[1].split(";");              var list_url = document.getElementById("list_url_select");              if( (selectList) && selectList.length > 0 ){                for(var i = 0; i < selectList.length; i++){                  var opt = document.createElement("option");                  opt.value = ""+(i+1);                  opt.dir = "ltr";                  opt.text = selectList[i];                  list_url.appendChild(opt);                }              }            }else if (options[idx].indexOf("menuids") == 0) {              var optValue = options[idx].split("=");              setmenuids(optValue[1]);            }else{        			var optValue = options[idx].split("=");        			var selectItem = optValue[0]+"_select";        			var selectedValue = optValue[1];        			var element = document.getElementById(selectItem);        			//document.write(selectItem+" = "+selectedValue+"<p>");        			for (var i = 0; i < element.options.length; i++) {         				//document.write(i+":"+element.options[i].value+"<p>");        				if ( element.options[i].value == selectedValue ){        					element.selectedIndex = i;        					break;        				}         			}            }      		}        }	       } 	  }  }	  </script>    <script type="text/javascript" src="../dist/js/slate.js"></script>  </body></html>