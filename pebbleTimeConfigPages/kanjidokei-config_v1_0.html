<!DOCTYPE html><html>  <head>    <title>KANJI DOKEI Configuration</title>    <meta charset="UTF-8">    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0" name="viewport">    <title></title>        <link rel="stylesheet" href="../dist/css/slate.min.css">        <!--    <link rel="stylesheet" href="./config_files/slate.css">    <link rel="stylesheet" href="./config_files/custom.css">  -->  <style>  .title {    padding: 15px 10px;    text-transform: uppercase;    font-family: 'PT Sans', sans-serif;    font-size: 1.2em;    font-weight: 500;    color: #888888;    text-align: center;  }  </style>  </head>  <body>  <form id="main-form">    <h1 id="intodeb" class='title'>KANJI DOKEI configration</h1>    <div class='item-container'>      <div class='item-container-footer'>        <div class='item'>          Choose settings and click SAVE button to submit        </div>      </div>    </div>    <div class="item-container">      <div class="item-container-header">Global Setting</div>      <div class="item-container-content">        <label class="item" id="colorthema">            Color Theme        <select id="colorthema_select"  dir="rtl" class="item-select">          <option dir="ltr" value="rainbn">Rainbow</option>          <option dir="ltr" value="rainbv">Rainbow-V</option>          <option dir="ltr" value="rainbh">Rainbow-H</option>          <option dir="ltr" value="xmas">X mas</option>          <option dir="ltr" value="hallow">Halloween</option>          <option dir="ltr" value="ocean">Ocean</option>          <option dir="ltr" value="forest">Forest</option>          <option dir="ltr" value="white">White</option>        </select>        </label>       <label class="item">           Kanji Number font type          <select id="fonttype_select" dir="rtl" class="item-select">            <option dir="ltr" value="simple">simple</option>            <option dir="ltr" value="complex">complex</option>          </select>        </label>       </div>          <div class="item-container-header">Display On/Off Setting</div>      <div class="item-container-content">        <label class="item">            Disconnet phone Status display          <select id="discstat_select" dir="rtl" class="item-select">            <option dir="ltr" value="off">off</option>            <option dir="ltr" value="on" selected>on</option>            <option dir="ltr" value="shake">on shake</option>          </select>        </label>        <label class="item">            Battery level display        <select id="battstat_select"  dir="rtl" class="item-select">          <option dir="ltr" value="off">off</option>          <option dir="ltr" value="on" selected>on</option>          <option dir="ltr" value="shake">on shake</option>        </select>        </label>        <label class="item">            Temperature display        <select id="weather_select"  dir="rtl" class="item-select">          <option dir="ltr" value="off">off</option>          <option dir="ltr" value="on" selected>on</option>          <option dir="ltr" value="shake">on shake</option>        </select>        </label>        <label class="item">          Day of Month display          <select id="dom_select" dir="rtl" class="item-select">            <option dir="ltr" value="off">off</option>            <option dir="ltr" value="on" selected>on</option>            <option dir="ltr" value="shake">on shake</option>          </select>        </label>        <label class="item">          Day of Week display        <select id="dow_select" dir="rtl" class="item-select">            <option dir="ltr" value="off">off</option>            <option dir="ltr" value="on" selected>on</option>            <option dir="ltr" value="shake">on shake</option>        </select>        </label>      </div>          <div class="item-container-header">Notification Setting</div>      <div class="item-container-content">        <label class="item">          Vibe hourly          <select id="vibehourly_select"  class="item-select">            <option value="off" selected>off</option>            <option value="on">on</option>          </select>        </label>        <label class="item" id="vibehoffset_line">          vibe hourly ahead of time          <select id="vibehoffset_select" dir="rtl"  class="item-select">            <option dir="ltr" value="0">on the hour</option>            <option dir="ltr" value="-1">-1 min</option>            <option dir="ltr" value="-2">-2 min</option>            <option dir="ltr" value="-3">-3 min</option>            <option dir="ltr" value="-4">-4 min</option>            <option dir="ltr" value="-5">-5 min</option>            <option dir="ltr" value="-6">-6 min</option>            <option dir="ltr" value="-7">-7 min</option>            <option dir="ltr" value="-8">-8 min</option>            <option dir="ltr" value="-9">-9 min</option>            <option dir="ltr" value="-10">-10 min</option>          </select>        </label>        <label class="item" id="vibehstart_line">          vibe hourly start hour          <select id="vibehstart_select"  class="item-select">            <option value="0">00</option>            <option value="1">01</option>            <option value="2">02</option>            <option value="3">03</option>            <option value="4">04</option>            <option value="5">05</option>            <option value="6">06</option>            <option value="7" selected>07</option>            <option value="8">08</option>            <option value="9">09</option>            <option value="10">10</option>            <option value="11">11</option>            <option value="12">12</option>            <option value="13">13</option>            <option value="14">14</option>            <option value="15">15</option>            <option value="16">16</option>            <option value="17">17</option>            <option value="18">18</option>            <option value="19">19</option>            <option value="20">20</option>            <option value="21">21</option>            <option value="22">22</option>            <option value="23">23</option>          </select>        </label>        <label class="item" id="vibehend_line">          vibe hourly end hour          <select id="vibehend_select"  class="item-select">            <option value="0">00</option>            <option value="1">01</option>            <option value="2">02</option>            <option value="3">03</option>            <option value="4">04</option>            <option value="5">05</option>            <option value="6">06</option>            <option value="7">07</option>            <option value="8">08</option>            <option value="9">09</option>            <option value="10">10</option>            <option value="11">11</option>            <option value="12">12</option>            <option value="13">13</option>            <option value="14">14</option>            <option value="15">15</option>            <option value="16">16</option>            <option value="17">17</option>            <option value="18">18</option>            <option value="19">19</option>            <option value="20">20</option>            <option value="21">21</option>            <option value="22" selected>22</option>            <option value="23">23</option>          </select>        </label>        <label class="item">          Disconnect Vibe          <select id="vibedisc_select" class="item-select">            <option value="off" selected>off</option>            <option value="on">on</option>          </select>        </label>      </div>    </div>    <div class="item-container-header" style="display: none;">Shake Action Setting</div>      <div class="item-container-content"  style="display: none;">        <label class="item">            Display Seconds on Shake        <select id="shaketime_select"  dir="rtl" class="item-select">          <option dir="ltr" value="off">off</option>          <option dir="ltr" value="on">on</option>        </select>        </label>    </div>    <div class="item-container-header">Temperature Setting</div>    <div class="item-container-content">      <label class="item">        Unit of temperature        <select id="wunits_select" class="item-select">          <option value="metric">C</option>          <option value="imperial">F</option>        </select>      </label>      <label class="item">        Location by        <select id="wloctype_select"  dir="rtl" class="item-select">          <option dir="ltr" value="gps">GPS</option>          <option dir="ltr" value="city">City name</option>          <option dir="ltr" value="zip">ZIP Code</option>          <option dir="ltr" value="latlon">Latitude, Longitude</option>        </select>      </label>      <label class="item">        <div class="item-input-wrapper" style="display: none;"  id="wloc_input_line">          <input type="text" class="item-input" id="wloc_input" placeholder="">        </div>      </label>    </div>    <div class='item-container'>      <div class='button-container' style='margin-bottom:1em;'>        <input id='save_button' type='button' class='item-button' value='SAVE' >      </div>    </div>	    <div >    <p align='center'>Starter Guide    </p>    <p align='center'>      <image src="kanjidokei_manual1.png">    </p>    <p align='center'>      <image src="kanjidokei_manual2.png">    </p>    </div>    <dl id="debug" style="display: none;">      <input type="text" id="debstr" size="40" value="" >    </dl>     <div class='item-container-footer'>      copyright kaaku ^_^    </div>	<!--  <style>	select{    -webkit-appearance: button;    -moz-appearance: button;    appearance: button;    border-radius:6px;	padding: 10px;	line-height: 20px;    font-size: 20px;    color: #FFFFFF;    border: none;    background:#888888;	}	button {		font-size: 20px;	}	</style>  -->		 <script type="text/javascript" src="../dist/js/slate.js"></script>    <script>      function saveOptions() {        var optionInfo = [            [ "colorthema", "colorthema_select" ],            [ "fonttype", "fonttype_select" ],            [ "dom", "dom_select" ],            [ "dow", "dow_select" ],            [ "vibehourly", "vibehourly_select" ],            [ "vibehoffset", "vibehoffset_select" ],            [ "vibehstart", "vibehstart_select" ],            [ "vibehend", "vibehend_select" ],            [ "vibedisc", "vibedisc_select" ],            [ "battstat", "battstat_select" ],            [ "discstat", "discstat_select" ],           [ "weather", "weather_select"],            [ "wunits", "wunits_select"],           [ "wloctype", "wloctype_select" ],           [ "wlocinput", "wloc_input"],           [ "debstr" ,  "debstr" ]        ];        var options = {};        for(var i = 0; i < optionInfo.length; i++){          var optionkey = optionInfo[i][0];          var idname = optionInfo[i][1];          if(idname == optionkey){            options[optionkey] =  document.getElementById(idname).value;          }else if(idname == "wloc_input" ){            options[optionkey] =  document.getElementById(idname).value.replace(/,/g, ";");          }else{            var element = document.getElementById(idname);            options[optionkey] = element.options[element.selectedIndex].value;          }        }        return options;      };      // Get query variables      function getQueryParam(variable, defaultValue) {        // Find all URL parameters        var query = location.search.substring(1);        var vars = query.split('&');        for (var i = 0; i < vars.length; i++) {          var pair = vars[i].split('=');          // If the query variable parameter is found, decode it to use and return it for use          if (pair[0] === variable) {            return decodeURIComponent(pair[1]);          }        }        return defaultValue || false;      }      var submitButton = document.getElementById("save_button");      submitButton.addEventListener("click",         function() {          console.log("Submit");          var options = saveOptions();          var return_to = getQueryParam('return_to', 'pebblejs://close#');          var location = return_to + encodeURIComponent(JSON.stringify(options));                    document.location = location;        },         false);	      var vibehourlySelect = document.getElementById("vibehourly_select");      var vibehoffsetLine = document.getElementById("vibehoffset_line");      var vibehstartLine = document.getElementById("vibehstart_line");      var vibehendLine = document.getElementById("vibehend_line");      var update_vibehourly = function (){          if(vibehourlySelect.options[vibehourlySelect.selectedIndex].value == "off"){            vibehoffsetLine.style.display = "none";            vibehstartLine.style.display = "none";            vibehendLine.style.display = "none";          }else{            vibehoffsetLine.style.display = "block";            vibehstartLine.style.display = "block";            vibehendLine.style.display = "block";          }      };      vibehourlySelect.addEventListener("change", update_vibehourly, false);      var wloctypeSelect = document.getElementById("wloctype_select");      var wlocLine = document.getElementById("wloc_input_line");      var wlocInput = document.getElementById("wloc_input");      var update_wlocline = function (start){          if(start  != "start"){             wlocInput.value = "";          }          var selvalue = wloctypeSelect.options[wloctypeSelect.selectedIndex].value ;          if(selvalue == "gps"){            wlocLine.style.display = "none";          }else{            wlocLine.style.display = "block";            switch(selvalue){            case "city":              wlocInput.placeholder = "(e.g.) Tokyo,jp  (use ISO 3166 country code)";              break;            case "zip":              wlocInput.placeholder = "(e.g.) 180-0001,jp  (use ISO 3166 country code)";              break;            case "latlon":              wlocInput.placeholder = "(e.g.) 35.708,139.581";                            break;            }          }      };      wloctypeSelect.addEventListener("change", update_wlocline, false);      var intodebcnt = 0;      var intodeb = document.getElementById("intodeb");      intodeb.addEventListener("click",         function() {          if(++intodebcnt >= 3){           var debug_tag = document.getElementById("debug");          debug_tag.style.display = "block";        }       },        false);      if(typeof location.href === "string"){  	   var optionString = location.href.split("?")[1];       if(typeof optionString === "string"){          optionString = optionString.split("&")[0];          if(typeof optionString === "string"){      	   var optionArray = optionString.split(",");           if(typeof optionArray === "object"){      	   //document.write(optionArray+"<p>num="+optionArray.length+"<p>");        		for (var idx = 0; idx < optionArray.length; idx++){              if(optionArray[idx] == "debug"){                  // hide tags for debug                  var debug_tag = document.getElementById("debug");                  debug_tag.style.display = "block";              }else if(optionArray[idx] == "bw"){                  // delete colorthema_select options without top two option                  var colortheme = document.getElementById("colorthema");                  colortheme.style.display = "none";              }else{          			var optValue = optionArray[idx].split("=");                if(optValue[0] == "wlocinput"){                  wlocInput.value = optValue[1].replace(/;/g, ",");                  if(wlocInput.value != ""){                    wlocLine.style.display = "block";                  }                }else{            			var selectItem = optValue[0]+"_select";            			var selectedValue = optValue[1];            			var element = document.getElementById(selectItem);            			//document.write(selectItem+" = "+selectedValue+"<p>");                  if(element != undefined){              			for (var i = 0; i < element.options.length; i++) {               				//document.write(i+":"+element.options[i].value+"<p>");              				if ( element.options[i].value == selectedValue ){              					element.selectedIndex = i;              					break;              				}             			  }                  }                }              }        		}          }        }      }    }    update_vibehourly();	  	  </script>  </body></html>